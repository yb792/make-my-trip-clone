{"ast":null,"code":"// src/pages/UserBookings.js\nimport axios from'axios';import{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const cityMap={DEL:'Delhi',BOM:'Mumbai',BLR:'Bangalore',HYD:'Hyderabad',PNQ:'Pune',MAA:'Chennai',CCU:'Kolkata',GOI:'Goa',JAI:'Jaipur',LKO:'Lucknow'};const UserBookings=()=>{const[bookings,setBookings]=useState([]);const token=localStorage.getItem('token');const API_BASE=process.env.REACT_APP_API_BASE_URL;// Reference to the environment variable\nuseEffect(()=>{const fetchBookings=async()=>{try{const res=await axios.get(`${API_BASE}/api/bookings/my`,{headers:{Authorization:`Bearer ${token}`}});setBookings(res.data);}catch(err){console.error('Error fetching bookings:',err);}};fetchBookings();},[API_BASE,token]);// Ensure the effect reruns if `apiBaseUrl` or `token` changes\nconst cancelBooking=async id=>{if(!window.confirm('Are you sure you want to cancel this booking?'))return;try{await axios.delete(`${apiBaseUrl}/api/bookings/${id}`,{headers:{Authorization:`Bearer ${token}`}});setBookings(bookings.filter(b=>b._id!==id));}catch(err){console.error('Error cancelling booking:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4 text-center fw-bold\",children:\"\\uD83E\\uDDFE Your Bookings\"}),bookings.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-muted\",children:\"No bookings found.\"}):bookings.map(booking=>{var _booking$flight,_booking$flight2,_booking$flight3,_booking$flight4,_booking$flight5,_booking$flight6,_booking$flight7,_booking$hotel,_booking$hotel2;return/*#__PURE__*/_jsx(\"div\",{className:\"card shadow-sm mb-4 border-0 rounded-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title mb-3\",children:booking.type==='flight'?/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\u2708\\uFE0F \",/*#__PURE__*/_jsx(\"strong\",{children:(_booking$flight=booking.flight)===null||_booking$flight===void 0?void 0:_booking$flight.airline}),\" \\u2014\",' ',/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary\",children:[cityMap[(_booking$flight2=booking.flight)===null||_booking$flight2===void 0?void 0:_booking$flight2.fromCode]||((_booking$flight3=booking.flight)===null||_booking$flight3===void 0?void 0:_booking$flight3.from),\" (\",(_booking$flight4=booking.flight)===null||_booking$flight4===void 0?void 0:_booking$flight4.fromCode,\")\"]}),' ',\"\\u27A1\",' ',/*#__PURE__*/_jsxs(\"span\",{className:\"text-success\",children:[cityMap[(_booking$flight5=booking.flight)===null||_booking$flight5===void 0?void 0:_booking$flight5.toCode]||((_booking$flight6=booking.flight)===null||_booking$flight6===void 0?void 0:_booking$flight6.to),\" (\",(_booking$flight7=booking.flight)===null||_booking$flight7===void 0?void 0:_booking$flight7.toCode,\")\"]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\uD83C\\uDFE8 \",/*#__PURE__*/_jsx(\"strong\",{children:(_booking$hotel=booking.hotel)===null||_booking$hotel===void 0?void 0:_booking$hotel.name}),\" \\u2014\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-primary\",children:(_booking$hotel2=booking.hotel)===null||_booking$hotel2===void 0?void 0:_booking$hotel2.location})]})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled mb-3\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Booking ID:\"}),\" \",booking._id]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \\u20B9\",booking.totalPrice]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Booked on:\"}),\" \",new Date(booking.createdAt).toLocaleString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger\",onClick:()=>cancelBooking(booking._id),children:\"Cancel Booking\"})})]})},booking._id);})]});};export default UserBookings;","map":{"version":3,"names":["axios","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","cityMap","DEL","BOM","BLR","HYD","PNQ","MAA","CCU","GOI","JAI","LKO","UserBookings","bookings","setBookings","token","localStorage","getItem","API_BASE","process","env","REACT_APP_API_BASE_URL","fetchBookings","res","get","headers","Authorization","data","err","console","error","cancelBooking","id","window","confirm","delete","apiBaseUrl","filter","b","_id","className","children","length","map","booking","_booking$flight","_booking$flight2","_booking$flight3","_booking$flight4","_booking$flight5","_booking$flight6","_booking$flight7","_booking$hotel","_booking$hotel2","type","flight","airline","fromCode","from","toCode","to","hotel","name","location","totalPrice","Date","createdAt","toLocaleString","onClick"],"sources":["C:/Users/HP/Documents/make-my-trip-clone/make-my-trip-clone/client/src/pages/UserBookings.js"],"sourcesContent":["// src/pages/UserBookings.js\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst cityMap = {\r\n  DEL: 'Delhi',\r\n  BOM: 'Mumbai',\r\n  BLR: 'Bangalore',\r\n  HYD: 'Hyderabad',\r\n  PNQ: 'Pune',\r\n  MAA: 'Chennai',\r\n  CCU: 'Kolkata',\r\n  GOI: 'Goa',\r\n  JAI: 'Jaipur',\r\n  LKO: 'Lucknow',\r\n};\r\n\r\nconst UserBookings = () => {\r\n  const [bookings, setBookings] = useState([]);\r\n  const token = localStorage.getItem('token');\r\n  const API_BASE = process.env.REACT_APP_API_BASE_URL; // Reference to the environment variable\r\n\r\n  useEffect(() => {\r\n    const fetchBookings = async () => {\r\n      try {\r\n        const res = await axios.get(`${API_BASE}/api/bookings/my`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setBookings(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching bookings:', err);\r\n      }\r\n    };\r\n\r\n    fetchBookings();\r\n  }, [API_BASE, token]); // Ensure the effect reruns if `apiBaseUrl` or `token` changes\r\n\r\n  const cancelBooking = async (id) => {\r\n    if (!window.confirm('Are you sure you want to cancel this booking?')) return;\r\n\r\n    try {\r\n      await axios.delete(`${apiBaseUrl}/api/bookings/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setBookings(bookings.filter((b) => b._id !== id));\r\n    } catch (err) {\r\n      console.error('Error cancelling booking:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2 className=\"mb-4 text-center fw-bold\">üßæ Your Bookings</h2>\r\n      {bookings.length === 0 ? (\r\n        <p className=\"text-center text-muted\">No bookings found.</p>\r\n      ) : (\r\n        bookings.map((booking) => (\r\n          <div key={booking._id} className=\"card shadow-sm mb-4 border-0 rounded-4\">\r\n            <div className=\"card-body p-4\">\r\n              <h5 className=\"card-title mb-3\">\r\n                {booking.type === 'flight' ? (\r\n                  <>\r\n                    ‚úàÔ∏è <strong>{booking.flight?.airline}</strong> ‚Äî{' '}\r\n                    <span className=\"text-primary\">\r\n                      {cityMap[booking.flight?.fromCode] || booking.flight?.from} ({booking.flight?.fromCode})\r\n                    </span>{' '}\r\n                    ‚û°{' '}\r\n                    <span className=\"text-success\">\r\n                      {cityMap[booking.flight?.toCode] || booking.flight?.to} ({booking.flight?.toCode})\r\n                    </span>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    üè® <strong>{booking.hotel?.name}</strong> ‚Äî{' '}\r\n                    <span className=\"text-primary\">{booking.hotel?.location}</span>\r\n                  </>\r\n                )}\r\n              </h5>\r\n              <ul className=\"list-unstyled mb-3\">\r\n                <li><strong>Booking ID:</strong> {booking._id}</li>\r\n                <li><strong>Price:</strong> ‚Çπ{booking.totalPrice}</li>\r\n                <li><strong>Booked on:</strong> {new Date(booking.createdAt).toLocaleString()}</li>\r\n              </ul>\r\n              <div className=\"text-end\">\r\n                <button\r\n                  className=\"btn btn-outline-danger\"\r\n                  onClick={() => cancelBooking(booking._id)}\r\n                >\r\n                  Cancel Booking\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserBookings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}